(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{737:(e,t,a)=>{Promise.resolve().then(a.bind(a,6281))},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},6281:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5155),r=a(2115),c=a(5695),n=a(3464);function l(e){let{commitId:t,onCreated:a}=e,[c,l]=(0,r.useState)(""),[o,m]=(0,r.useState)(""),d=async()=>{if(!c.trim()){m("❌ Tag name cannot be empty");return}try{let e=await n.A.post("https://chatcommit.fly.dev/tag/",{name:c,commit_id:t});m('✅ Tag "'.concat(e.data.name,'" created')),l(""),a&&a()}catch(a){var e,s;let t=(null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"Error creating tag";m("❌ ".concat(t))}};return(0,s.jsxs)("div",{className:"p-3 mb-3 rounded bg-gray-900 text-gray-100 border border-gray-700",children:[(0,s.jsx)("h3",{className:"text-sm font-bold mb-2",children:"Add Tag"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"text",className:"bg-gray-800 text-gray-100 border border-gray-600 rounded w-48 text-sm px-2 py-1",placeholder:'e.g. "chatgpt"',value:c,onChange:e=>l(e.target.value)}),(0,s.jsx)("button",{onClick:d,className:"bg-green-600 text-white text-sm px-3 py-1 rounded hover:bg-green-700",children:"Add Tag"})]}),o&&(0,s.jsx)("p",{className:"text-xs mt-1 text-gray-300",children:o})]})}function o(){var e,t,a;let o=null===(e=(0,c.useParams)().id)||void 0===e?void 0:e.toString(),[m,d]=(0,r.useState)(null),[i,x]=(0,r.useState)([]),[g,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!o){h(!1);return}n.A.get("https://chatcommit.fly.dev/api/commit/".concat(o)).then(e=>d(e.data)).catch(e=>console.error("Error fetching commit:",e)),n.A.get("https://chatcommit.fly.dev/tag/commit/".concat(o)).then(e=>x(e.data)).catch(e=>console.error("Error fetching tags:",e)).finally(()=>h(!1))},[o]);let u=async()=>{if(o)try{let e=await n.A.get("https://chatcommit.fly.dev/tag/commit/".concat(o));x(e.data)}catch(e){console.error("Error refreshing tags:",e)}};return g?(0,s.jsx)("p",{className:"p-6 text-white",children:"Loading..."}):m?(0,s.jsxs)("div",{className:"max-w-3xl mx-auto p-6 bg-gray-900 text-gray-100 rounded-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Commit Details"}),(0,s.jsxs)("div",{className:"p-4 rounded border border-gray-700 bg-gray-800",children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Commit Hash:"}),(0,s.jsx)("p",{className:"font-mono text-blue-300 text-sm",children:m.commit_hash}),(0,s.jsx)("p",{className:"mt-4 text-gray-400 text-sm mb-1",children:"Message:"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-100",children:m.commit_message}),(0,s.jsx)("p",{className:"mt-4 text-gray-400 text-sm mb-1",children:"Created At:"}),(0,s.jsx)("p",{className:"text-sm text-gray-200",children:new Date(m.created_at).toLocaleString()}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(l,{commitId:m.id,onCreated:u})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-400 mb-1 font-semibold",children:"Tags:"}),i.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map(e=>(0,s.jsxs)("span",{className:"bg-yellow-600 text-yellow-100 text-xs font-semibold px-2 py-1 rounded-full",children:["#",e.name]},e.id))}):(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No tags for this commit."})]}),(null===(a=m.conversation_context)||void 0===a?void 0:null===(t=a.messages)||void 0===t?void 0:t.length)>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-400 mb-1 font-semibold",children:"Conversation Context"}),(0,s.jsx)("div",{className:"bg-gray-700 border border-gray-600 p-3 rounded text-sm leading-relaxed text-gray-100",children:m.conversation_context.messages.map((e,t)=>(0,s.jsx)("p",{className:"mb-2",children:e},t))})]})]})]}):(0,s.jsx)("p",{className:"p-6 text-red-500",children:"Commit not found."})}}},e=>{var t=t=>e(e.s=t);e.O(0,[464,441,684,358],()=>t(737)),_N_E=e.O()}]);